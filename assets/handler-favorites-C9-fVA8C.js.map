{"version":3,"file":"handler-favorites-C9-fVA8C.js","sources":["../../src/handlers/handler-favorites.js"],"sourcesContent":["const favoriteLink = document.querySelector('.nav-link-favorites');\n\nimport { fetchFavorites } from '../service/fetch.js';\nimport { renderFavoritesPage } from '../renders/renders-favorites.js';\nimport { getFavorites } from '../service/storage.js';\nimport { removeFavorite } from '../service/storage.js';\nimport { handleStartLinkClick } from '../service/modal-utils.js';\n\nlet favoritesUpdatedListener = null;\nlet favoritesContainerListener = null;\n\n/**\n * Handle trash icon click - remove favorite exercise\n */\nfunction handleTrashClick(event) {\n  const trashIcon = event.target.closest('.parts-trash_svg');\n  if (!trashIcon) return;\n\n  event.stopPropagation();\n  event.preventDefault();\n\n  const exerciseId = trashIcon.dataset.trashId;\n  console.log('Trash icon clicked for exercise:', exerciseId);\n\n  const favoritesContainer = document.querySelector('.favorites-wrapper');\n  const exerciseItem = favoritesContainer.querySelector(\n    `[data-exercise-id=\"${exerciseId}\"]`\n  );\n\n  if (exerciseItem) {\n    exerciseItem.remove();\n    removeFavorite({ id: exerciseId });\n    document.dispatchEvent(new Event('favoritesUpdated'));\n  }\n}\n\n/**\n * Load and render all favorites from localStorage\n */\nexport async function loadFavorites() {\n  const favorites = getFavorites();\n\n  const favoritesContainer = document.querySelector('.favorites-wrapper');\n  if (favoritesContainer) {\n    favoritesContainer.innerHTML = ''; // Clear current content\n  }\n\n  if (favorites.length === 0) {\n    renderFavoritesPage(0);\n    return;\n  }\n\n  // Fetch and render each favorite exercise\n  for (const fav of favorites) {\n    try {\n      await fetchFavorites(fav.id);\n    } catch (error) {\n      console.error('Error fetching favorite:', fav.id, error);\n    }\n  }\n}\n\nexport function initFavoritesHandler() {\n  const favoritesContainer = document.querySelector('.favorites-wrapper');\n\n  // Remove old event listeners if they exist\n  if (favoritesUpdatedListener) {\n    document.removeEventListener('favoritesUpdated', favoritesUpdatedListener);\n  }\n  if (favoritesContainerListener && favoritesContainer) {\n    favoritesContainer.removeEventListener('click', favoritesContainerListener);\n  }\n\n  // Load favorites when the page initializes\n  loadFavorites();\n\n  favoriteLink.addEventListener('click', async () => {\n    // Favorites will be loaded by the page initialization\n    // This click handler is mainly for navigation\n  });\n\n  // Listen for favorites updates to refresh the page\n  favoritesUpdatedListener = () => {\n    loadFavorites();\n  };\n  document.addEventListener('favoritesUpdated', favoritesUpdatedListener);\n\n  // Attach event delegation listener for favorites container\n  // This handles both trash icon clicks and start link clicks\n  favoritesContainerListener = event => {\n    handleTrashClick(event);\n    handleStartLinkClick(event);\n  };\n\n  if (favoritesContainer) {\n    favoritesContainer.addEventListener('click', favoritesContainerListener);\n  }\n}\n"],"names":["favoriteLink","favoritesUpdatedListener","favoritesContainerListener","handleTrashClick","event","trashIcon","exerciseId","exerciseItem","removeFavorite","loadFavorites","favorites","getFavorites","favoritesContainer","renderFavoritesPage","fav","fetchFavorites","error","initFavoritesHandler","handleStartLinkClick"],"mappings":"0EAAA,MAAMA,EAAe,SAAS,cAAc,qBAAqB,EAQjE,IAAIC,EAA2B,KAC3BC,EAA6B,KAKjC,SAASC,EAAiBC,EAAO,CAC/B,MAAMC,EAAYD,EAAM,OAAO,QAAQ,kBAAkB,EACzD,GAAI,CAACC,EAAW,OAEhBD,EAAM,gBAAe,EACrBA,EAAM,eAAc,EAEpB,MAAME,EAAaD,EAAU,QAAQ,QACrC,QAAQ,IAAI,mCAAoCC,CAAU,EAG1D,MAAMC,EADqB,SAAS,cAAc,oBAAoB,EAC9B,cACtC,sBAAsBD,CAAU,IACpC,EAEMC,IACFA,EAAa,OAAM,EACnBC,EAAe,CAAE,GAAIF,CAAU,CAAE,EACjC,SAAS,cAAc,IAAI,MAAM,kBAAkB,CAAC,EAExD,CAKO,eAAeG,GAAgB,CACpC,MAAMC,EAAYC,IAEZC,EAAqB,SAAS,cAAc,oBAAoB,EAKtE,GAJIA,IACFA,EAAmB,UAAY,IAG7BF,EAAU,SAAW,EAAG,CAC1BG,EAAoB,CAAC,EACrB,MACD,CAGD,UAAWC,KAAOJ,EAChB,GAAI,CACF,MAAMK,EAAeD,EAAI,EAAE,CAC5B,OAAQE,EAAO,CACd,QAAQ,MAAM,2BAA4BF,EAAI,GAAIE,CAAK,CACxD,CAEL,CAEO,SAASC,GAAuB,CACrC,MAAML,EAAqB,SAAS,cAAc,oBAAoB,EAGlEX,GACF,SAAS,oBAAoB,mBAAoBA,CAAwB,EAEvEC,GAA8BU,GAChCA,EAAmB,oBAAoB,QAASV,CAA0B,EAI5EO,IAEAT,EAAa,iBAAiB,QAAS,SAAY,CAGrD,CAAG,EAGDC,EAA2B,IAAM,CAC/BQ,GACJ,EACE,SAAS,iBAAiB,mBAAoBR,CAAwB,EAItEC,EAA6BE,GAAS,CACpCD,EAAiBC,CAAK,EACtBc,EAAqBd,CAAK,CAC9B,EAEMQ,GACFA,EAAmB,iBAAiB,QAASV,CAA0B,CAE3E"}